{% extends 'based/based.html' %}
{% load static %}
{% block content %}
        <!-- PAGE TITLE
        ================================================== -->
        <section class="page-title-section2 top-position1 bg-img cover-background text-start" data-overlay-dark="7" data-background="{% static 'img/ttvimg/event.jpg'%}">
            <div class="container">
                <div class="row align-items-center justify-content-between">
                    <div class="col-lg-7 col-xxl-5">
                        <div class="title-style3">
                            <span>Join Us</span>
                        </div>
                        <h1 class="text-white mb-0 text-shadow-large">Careers</h1>
                    </div>
                </div>

            </div>
        </section>
        <!-- TABLES
        ================================================== -->
        <section>
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-9">
                        <div class="mb-6 mb-lg-8 position-relative elements-block">
                            <div class="inner-title">
                                <h2 class="mb-0">Full Time/Part Time Jobs</h2>
                            </div>
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th scope="col">Job Title</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!--For loop to display all fulltime items in job-->
                                    {% for j in job %}
                                    {% if j.jobcat == 'Full Time' %}
                                    <tr>
                                        <td scope="row">
                                            <button class="expand-content" data-row="expanded-content-{{ j.jobname }}"><span>+</span> {{ j.jobname }}</button>
                                            <span id="expanded-content-{{ j.jobname }}" class="expanded-content">{{ j.jobdesc }}</span>
                                        </td>
                                    </tr>
                                    {% endif %}
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                        <div class="mb-6 mb-lg-8 position-relative elements-block">
                            <div class="inner-title">
                                <h2 class="mb-0">Internship</h2>
                            </div>
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th scope="col">Job Title</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!--For loop to display all items in job-->
                                    {% for j in job %}
                                    {% if j.jobcat == 'Internship' %}
                                    <tr class="expand-con">
                                        <td scope="row">
                                            <button class="expand-content" onclick="toggleContent(this)"><span id="chg-when-expand">+</span> {{ j.jobname }}</button>
                                            <span class="expanded-content" id="expanded-content">{{ j.jobdesc }}</span>
                                        </td>
                                    </tr>
                                    {% endif %}
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="col-md-6 mx-auto text-center">
                        <h2 class="md-6">Interested to join our team?</h2>
                        <p>Send your resume <a class="line" href="mailto:hr@ttvision-tech.com"><b>here</b></a> or apply <a href="{% url 'hrform' %}" class="font-weight-bold line"><b>here</b></a></p>
                    </div>
                </div>
            </div>
        </section>
        {% comment %} <script>
            function toggleContent(no) {
                var expandedContent = document.getElementById('expanded-content' + no);
                var chg = document.getElementById('chg-when-expand' + no);
        
        
               // Toggle to show/hide the hidden content for the selected row
                expandedContent.classList.toggle('show');
        
        
               // Change the + to - or - to + for the selected row
                chg.innerText = (expandedContent.classList.contains('show')) ? '-' : '+';
        
        
               // Get all other expanded content elements
                var allExpandedContents = document.querySelectorAll('.expanded-content');
        
        
               // Iterate over all other expanded contents
                allExpandedContents.forEach(function(content) {
                    // Hide other expanded contents
                    if (content.id !== 'expanded-content' + no) {
                        content.classList.remove('show');
                    }
                });
        
        
               // Get all other plus/minus indicators
                var allChangeIndicators = document.querySelectorAll('[id^="chg-when-expand"]');
        
        
               // Iterate over all other indicators
                allChangeIndicators.forEach(function(indicator) {
                    // Change other indicators to +
                    if (indicator.id !== 'chg-when-expand' + no) {
                        indicator.innerText = '+';
                    }
                });
            }
        </script> {% endcomment %}
        <!--Script to toggle job description-->
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                var buttons = document.querySelectorAll('.expand-content');
                buttons.forEach(function (button) {
                    button.addEventListener('click', function () {
                        var targetId = this.getAttribute('data-row');
                        var targetContent = document.getElementById(targetId);
                        if (targetContent) {
                            // Close all other expanded content
                            var allContent = document.querySelectorAll('.expanded-content.show');
                            allContent.forEach(function (content) {
                                if (content.id !== targetId) {
                                    content.classList.remove('show');
                                    // Update the button text for the closed content
                                    var closedButton = document.querySelector('[data-row="' + content.id + '"]');
                                    if (closedButton) {
                                        closedButton.querySelector('span').innerText = '+';
                                    }
                                }
                            });
                           // Toggle the visibility of the clicked content
                            targetContent.classList.toggle('show');
                           // Toggle button text based on the visibility of the content
                            var buttonText = this.querySelector('span');
                            if (targetContent.classList.contains('show')) {
                                buttonText.innerText = '-';
                            } else {
                                buttonText.innerText = '+';
                            }
                        } else {
                            console.error('Target content not found for ID:', targetId);
                        }
                    });
                });
            });
            </script>
        {% endblock content %}